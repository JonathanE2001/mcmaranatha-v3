<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MC Maranatha</title>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

<style>
body {
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
    background: #ffffff;
}

.header {
    background: rgb(255,215,0);
    text-align: center;
    padding: 30px;
}

.header img {
    width: 130px;
}

.header h1 {
    color: #da291c;
    margin-top: 10px;
}

.menu-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 30px;
    padding: 40px;
}

.item {
    background: #f5f5f5;
    width: 300px;
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    text-align: center;
}

.item h3 {
    color: rgb(255,215,0);
}

button {
    background: #da291c;
    color: rgb(255,215,0);
    border: none;
    padding: 10px 20px;
    border-radius: 20px;
    cursor: pointer;
    margin-top: 15px;
    font-weight: bold;
}

button:hover {
    background: #b2221a;
}

/* POPUPS */

.popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.6);
    display: none;
    justify-content: center;
    align-items: center;
}

.popup-box {
    background: white;
    padding: 30px;
    border-radius: 20px;
    text-align: center;
    width: 350px;
}

.popup-box input, .popup-box select {
    width: 90%;
    padding: 8px;
    margin: 10px 0;
    border-radius: 10px;
    border: 1px solid #ccc;
}

select[multiple] {
    height: 120px;
}

.popup-box label {
    display: block;
    margin: 5px 0;
}
</style>
</head>

<body>

<div class="header">
    <img src="logo.png" alt="Logo">
    <h1>MC MARANATHA</h1>
</div>

<div class="menu-container">

<!-- Burgers -->

<div class="item">
<h3>Vega Burger</h3>
<button onclick="placeOrder('Vega Burger')">Bestel</button>
</div>

<div class="item">
<h3>Basic Burger / BB</h3>
<button onclick="placeOrder('Basic Burger / BB')">Bestel</button>
</div>

<div class="item">
<h3>Diet Big Mac</h3>
<button onclick="placeOrder('Diet Big Mac')">Bestel</button>
</div>

<div class="item">
<h3>Big Marco</h3>
<button onclick="placeOrder('Big Marco')">Bestel</button>
</div>

<div class="item">
<h3>Fire of the Spirit Burger</h3>
<button onclick="placeOrder('Fire of the Spirit Burger')">Bestel</button>
</div>

<div class="item">
<h3>El Sylvano Grande</h3>
<button onclick="placeOrder('El Sylvano Grande')">Bestel</button>
</div>

<div class="item">
<h3>Alfa Omega Burger</h3>
<button onclick="placeOrder('Alfa Omega Burger')">Bestel</button>
</div>

<div class="item">
<h3>The Power of de Nuggies Tower</h3>
<button onclick="placeOrder('The Power of de Nuggies Tower')">Bestel</button>
</div>

<div class="item">
<h3>CCC (Christian Crispy Chicken)</h3>
<button onclick="placeOrder('CCC (Christian Crispy Chicken)')">Bestel</button>
</div>

<div class="item">
<h3>McMinion</h3>
<button onclick="placeOrder('McMinion')">Bestel</button>
</div>

</div>

<!-- Eerste popup -->

<div id="confirmPopup" class="popup-overlay">
<div class="popup-box">

<h3>Bestelling bevestigen</h3>
<p id="popupText"></p>

<input type="text" id="customerName" placeholder="Vul je naam in">

<select id="sauceChoice" multiple style="display:none;">
<option value="Mayo">Mayo</option>
<option value="Ketchup">Ketchup</option>
<option value="Curry">Curry</option>
<option value="Knoflooksaus">Knoflooksaus</option>
<option value="Sriracha">Sriracha</option>
</select>

<button onclick="confirmOrder()">Bevestigen</button>
<button onclick="closePopup()">Annuleren</button>

</div>
</div>

<!-- Tweede popup -->

<div id="sidesPopup" class="popup-overlay">
<div class="popup-box">

<h3>Wil je iets bij je burger?</h3>
<p>Maximaal 2 sides</p>

<label><input type="checkbox" value="Kipnuggets"> Kipnuggets</label>
<label><input type="checkbox" value="Aardappelkroketjes"> Aardappelkroketjes</label>

<button onclick="confirmSides()">Bevestigen</button>
<button onclick="skipSides()">Overslaan</button>

</div>
</div>

<script>
const firebaseConfig = { 
  apiKey : "AIzaSyA--6-0cX6qPdUwV0NllkgtAhpm2_SDdJ4" , 
  authDomain : "mcmaranatha-9b500.firebaseapp.com" , 
  databaseURL : "https://mcmaranatha-9b500-default-rtdb.europe-west1.firebasedatabase.app" , 
  projectId : "mcmaranatha-9b500" , 
  storageBucket : "mcmaranatha-9b500.firebasestorage.app" , 
  messagingSenderId : "305909078179" , 
  appId : "1:305909078179:web:165a92a8abb81ccb0a4716" 
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let selectedItem = "";
let tempOrder = null;

function placeOrder(itemName) {
    selectedItem = itemName;
    document.getElementById("popupText").innerText =
        "Weet je zeker dat je " + itemName + " wilt bestellen?";

    document.getElementById("customerName").value = "";

    if(itemName === "CCC (Christian Crispy Chicken)") {
        document.getElementById("sauceChoice").style.display = "block";
    } else {
        document.getElementById("sauceChoice").style.display = "none";
    }

    document.getElementById("confirmPopup").style.display = "flex";
}

function closePopup() {
    document.getElementById("confirmPopup").style.display = "none";
}

function confirmOrder() {

    const name = document.getElementById("customerName").value.trim();
    const sauceSelect = document.getElementById("sauceChoice");
    const sauces = Array.from(sauceSelect.selectedOptions).map(o => o.value);

    if(name.length < 2) {
        alert("Vul een geldige naam in.");
        return;
    }

    if(selectedItem === "CCC (Christian Crispy Chicken)") {
        if(sauces.length === 0) {
            alert("Kies minimaal 1 saus.");
            return;
        }
        if(sauces.length > 3) {
            alert("Maximaal 3 sauzen.");
            return;
        }
    }

    tempOrder = {
        item: selectedItem,
        naam: name,
        tijd: Date.now(),
        saus: sauces.length > 0 ? sauces : null,
        sides: []
    };

    closePopup();
    document.getElementById("sidesPopup").style.display = "flex";
}

function confirmSides() {

    const checkboxes = document.querySelectorAll("#sidesPopup input[type=checkbox]:checked");

    if(checkboxes.length > 2) {
        alert("Maximaal 2 sides.");
        return;
    }

    tempOrder.sides = Array.from(checkboxes).map(c => c.value);

    db.ref("orders").push(tempOrder);

    tempOrder = null;
    document.getElementById("sidesPopup").style.display = "none";
}

function skipSides() {

    db.ref("orders").push(tempOrder);

    tempOrder = null;
    document.getElementById("sidesPopup").style.display = "none";
}
</script>

</body>
</html>
